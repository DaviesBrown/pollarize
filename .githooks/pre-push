#!/usr/bin/env bash
# Git pre-push hook: run tests before pushing

echo "Running test suite..."
python -m pytest --maxfail=1 --disable-warnings -q
RESULT=0
# exit code 5 means no tests were collected: treat as success
if [ $RESULT -eq 5 ]; then
  echo "No tests found. Skipping test run."
  exit 0
fi
if [ $RESULT -ne 0 ]; then
  echo "Tests failed. Aborting push."
  exit 1
fi
exit 0
